<!doctype html>
<html>
  <head>
    <title>User Activity Monitor</title>
    <style>
      body {
        font-family: Arial;
      }
      #log {
        border: 1px solid #ccc;
        padding: 10px;
        height: 200px;
        overflow-y: auto;
      }
      #warning {
        color: red;
        font-weight: bold;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div align="center">
      <h2>User Activity Monitor</h2>
      <div id="log"></div>
      <div id="warning"></div>
      <!-- warning outside the log box -->
      <br />
      <button onclick="resetLog()">Reset Log</button>
      <button onclick="exportLog()">Export Log</button>

      <script>
        let activities = [];
        const logDiv = document.getElementById("log");
        const warningDiv = document.getElementById("warning");

        // Track clicks, key presses, focus events
        document.addEventListener(
          "click",
          (e) => logActivity("Click", e.target.tagName),
          true,
        );
        document.addEventListener(
          "keydown",
          (e) => logActivity("KeyPress", e.key),
          true,
        );
        document.addEventListener(
          "focusin",
          (e) => logActivity("Focus", e.target.tagName),
          true,
        );

        function logActivity(type, detail) {
          const entry = { type, detail, time: new Date().toLocaleTimeString() };
          activities.push(entry);
          renderLog();

          // Suspicious activity threshold
          const clickCount = activities.filter(
            (a) => a.type === "Click",
          ).length;
          if (clickCount > 10) {
            warningDiv.textContent = "âš  Suspicious: Too many clicks!";
          }
        }

        function renderLog() {
          logDiv.innerHTML = activities
            .map((a) => `${a.time} - ${a.type}: ${a.detail}`)
            .join("<br>");
        }

        function resetLog() {
          activities = [];
          logDiv.innerHTML = "";
          warningDiv.textContent = ""; // clear warning too
        }

        function exportLog() {
          const text = activities
            .map((a) => `${a.time} - ${a.type}: ${a.detail}`)
            .join("\n");
          alert("Exported Log:\n\n" + text);
        }
      </script>
    </div>
  </body>
</html>
